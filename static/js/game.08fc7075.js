(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["game"],{"0565":function(e,t,i){},"17fe":function(e,t,i){"use strict";i("0565")},"355e":function(e,t,i){},"49cf":function(e,t,i){"use strict";i("74fd")},"65eb":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container game"},[i("div",{staticClass:"game-area"},[i("game-blue",{ref:"gameblue",attrs:{diedBee:e.diedBee,beeCoord:e.beeCoord},on:{"update:diedBee":function(t){e.diedBee=t},"update:died-bee":function(t){e.diedBee=t},"update:beeCoord":function(t){e.beeCoord=t},"update:bee-coord":function(t){e.beeCoord=t}}}),i("game-red",{ref:"gamered",on:{bullet:e.crash}})],1),i("div",{staticClass:"game-status"},[i("game-status",{ref:"gamestatus",attrs:{diedBee:e.diedBee,lifeValue:e.lifeValue}})],1),i("div",{staticClass:"game-hide-info"}),i("div",{staticClass:"add-user",on:{click:e.addUser}},[e._v("addUser")])])},o=[],a=(i("4de4"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"game-status"},[i("div",{staticClass:"game-status-score"},[e._v("score:"+e._s(e.score||0))]),i("div",{staticClass:"game-status-medal"},e._l(e.medal,(function(e,t){return i("span",{class:["game-info-top-icon","top"+(t+1)]})})),0),i("div",{staticClass:"game-status-enemy"},[i("ul",[e.diedBee.gf>0?i("li",[i("span",{staticClass:"role-icon role-gf"}),i("span",[e._v(e._s(e.diedBee.gf))])]):e._e(),e.diedBee.bf>0?i("li",[i("span",{staticClass:"role-icon role-bf"}),i("span",[e._v(e._s(e.diedBee.bf))])]):e._e(),e.diedBee.hwf>0?i("li",[i("span",{staticClass:"role-icon role-hwf"}),i("span",[e._v(e._s(e.diedBee.hwf))])]):e._e(),e.diedBee.fc>0?i("li",[i("span",{staticClass:"role-icon role-fc"}),i("span",[e._v(e._s(e.diedBee.fc))])]):e._e(),e.diedBee.fw>0?i("li",[i("span",{staticClass:"role-icon role-fw"}),i("span",[e._v(e._s(e.diedBee.fw))])]):e._e()])]),i("div",{staticClass:"game-status-life"},[e._l(e.lifeValue,(function(e,t){return[i("span",{staticClass:"game-status-life-icon"})]}))],2)])}),l=[],n=(i("a9e3"),i("c24f")),r={name:"GameStatus",data:function(){return{medal:[],medalDesc:""}},props:{lifeValue:{type:Number,default:3},diedBee:{type:Object,default:function(){return{}}}},computed:{score:function(){var e=this.diedBee.gf+2*this.diedBee.bf+3*this.diedBee.hwf+this.diedBee.fc+3*this.diedBee.fw;this.medal.length;return e>100?(this.medal=["","","","","",""],this.medalDesc="无双"):e>90?(this.medal=["","","","",""],this.medalDesc="将星"):e>70?(this.medal=["","","",""],this.medalDesc="英雄"):e>50?(this.medal=["","",""],this.medalDesc="三星勇士"):e>30?(this.medal=["",""],this.medalDesc="二星勇士"):e>10&&(this.medal=[""],this.medalDesc="一星勇士"),e}},methods:{addNewUser:function(){this.score||0!=this.medalDesc.length?Object(n["b"])({name:"nick",score:this.score,medal:this.medalDesc}).then((function(e){console.log(e)})):alert("你还没有开始玩游戏，无法上传成绩")}}},d=r,c=(i("17fe"),i("2877")),u=Object(c["a"])(d,a,l,!1,null,"1336e646",null),f=u.exports,h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"red"},[e._l(e.shootNum,(function(t){return i("div",{ref:"bullet"+t,refInFor:!0,staticClass:"bullet-group",style:{bottom:e.bulletY[t-1]+"px",left:e.bulletX[t-1]+"px"}},[i("span",{staticClass:"bullet-group-item"}),i("span",{staticClass:"bullet-group-item"})])})),i("div",{staticClass:"player-box",style:{transform:e.moveX}},[i("div",{ref:"player",staticClass:"player-bullet"},[i("span",{staticClass:"game-status-life-icon"})])])],2)},m=[],b=(i("a434"),{name:"Red",data:function(){return{moveX:0,dist:0,bulletX:[],bulletY:[],shootNum:[],width:0,height:0}},mounted:function(){this.width=window.screen.width,this.height=window.screen.height,document.addEventListener("keydown",this.gameHandle,!1)},methods:{getPosiInfo:function(e){var t=this.$refs["player"],i=t.getBoundingClientRect();this.bulletX.push(i.x+i.width/2)},shoot:function(e){var t=this;this.getPosiInfo(e);var i=setInterval((function(){if(t.bulletY[e-1]>t.height){clearInterval(i),t.bulletY[e-1]=-100;var s=t.$refs["bullet"+e];s[0].parentNode.removeChild(s[0])}else{var o=t.bulletY[e-1]+20;t.bulletY.splice(e-1,1,o),t.$emit("bullet",{bullet:t.$refs["bullet"+e][0],coord:t.$refs["bullet"+e][0].getBoundingClientRect(),timer:i})}}),30)},move:function(e){-1==e?(this.dist-=10,this.moveX="translateX(".concat(this.dist,"px)")):(this.dist+=10,this.moveX="translateX(".concat(this.dist,"px)"))},gameHandle:function(e){var t=e.keyCode||e.which;switch(t){case 32:var i=this.shootNum.length,s=i>0?this.shootNum[i-1]:0;this.shootNum.push(s+1),this.bulletY.push(0),this.shoot(s+1);break;case 37:this.move(-1);break;case 39:this.move(1);break;case 9:break}},lifeEnd:function(e){e.timer&&clearInterval(e.timer);var t=e.bullet;t.parentNode.removeChild(t)}}}),v=b,p=(i("e562"),Object(c["a"])(v,h,m,!1,null,"12c4ab40",null)),g=p.exports,C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"blue-box"},[i("div",{ref:"blueteam",staticClass:"blue"},[i("div",e._l(e.fwNum,(function(e){return i("span",{staticClass:"role-icon role-fw"})})),0),i("div",e._l(e.hwfNum,(function(e){return i("span",{staticClass:"role-icon role-hwf"})})),0),i("div",{staticClass:"muli-gf"},e._l(e.gfNum,(function(e){return i("span",{staticClass:"role-icon role-gf"})})),0),i("div",{staticClass:"muli-bf"},e._l(e.bfNum,(function(e){return i("span",{staticClass:"role-icon role-bf"})})),0)])])},w=[],B=(i("159b"),i("ac1f"),i("5319"),{name:"Blue",data:function(){return{blueTeam:null,blueTeamMoveX:0,blueTeamMoveY:0,moveDir:-1,requestAnimationID:null,width:0,height:0,fwNum:4,hwfNum:8,gfNum:20,bfNum:36,beeCoord:[],diedBee:{fw:0,hwf:0,gf:0,bf:0,fc:0}}},mounted:function(){this.width=window.screen.width,this.height=window.screen.height,this.blueTeam=this.$refs.blueteam,this.initPosi(),this.move()},methods:{moveLeft:function(){this.blueTeamMoveX>0?(this.blueTeamMoveX-=.5,this.blueTeamMoveY-=.2,this.blueTeam.style.left="".concat(this.blueTeamMoveX,"px"),this.blueTeam.style.top="".concat(this.blueTeamMoveX,"px")):this.moveDir=-1},moveRight:function(){this.blueTeamMoveX<100?(this.blueTeamMoveX+=.5,this.blueTeamMoveY+=.5,this.blueTeam.style.left="".concat(this.blueTeamMoveX,"px"),this.blueTeam.style.top="".concat(this.blueTeamMoveX,"px")):this.moveDir=1},move:function(){var e=this;1==this.moveDir?this.moveLeft():this.moveRight(),this.beeCoord.splice(0,this.beeCoord.length);var t=document.querySelector(".blue").querySelectorAll(".role-icon");t.forEach((function(t,i){var s=t.getBoundingClientRect();e.beeCoord.push({dom:t,coord:s})})),this.requestAnimationID=window.requestAnimationFrame(this.move)},initPosi:function(){var e=this,t=document.querySelector(".blue").querySelectorAll(".role-icon");t.forEach((function(t,i){var s=t.getBoundingClientRect();e.beeCoord.push({dom:t,coord:s}),t.style.top=s.top+"px",t.style.left=s.left+"px",setTimeout((function(){t.style.position="absolute"}),0)})),this.$emit("update:beeCoord",this.beeCoord)},lifeEnd:function(e){var t=this.beeCoord.indexOf(e);this.beeCoord.splice(t,1),this.$emit("update:beeCoord",this.beeCoord);var i=e.dom;i.parentNode.removeChild(i),this.calcDiedBee(e.dom.className)},calcDiedBee:function(e){var t=e.replace("role-icon ","").replace("role-","");this.diedBee[t]++,this.$emit("update:diedBee",this.diedBee)}}}),_=B,y=(i("49cf"),Object(c["a"])(_,C,w,!1,null,"35b68a3d",null)),x=y.exports,N={name:"Game",components:{GameStatus:f,GameRed:g,GameBlue:x},data:function(){return{lifeValue:3,beeCoord:[],diedBee:{}}},mounted:function(){},methods:{addUser:function(){this.$refs.gamestatus.addNewUser()},crash:function(e){var t=this.findBee(e);0!=t.length&&(this.$refs.gameblue.lifeEnd(t[0]),this.$refs.gamered.lifeEnd(e))},findBee:function(e){return this.beeCoord.filter((function(t,i){return e.coord.left>=t.coord.left&&e.coord.right<=t.coord.right&&e.coord.top<=t.coord.top&&e.coord.bottom>=t.coord.bottom}))}}},T=N,X=(i("cfcb"),Object(c["a"])(T,s,o,!1,null,"22326482",null));t["default"]=X.exports},"74fd":function(e,t,i){},a434:function(e,t,i){"use strict";var s=i("23e7"),o=i("23cb"),a=i("a691"),l=i("50c4"),n=i("7b0b"),r=i("65f0"),d=i("8418"),c=i("1dde"),u=c("splice"),f=Math.max,h=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var i,s,c,u,v,p,g=n(this),C=l(g.length),w=o(e,C),B=arguments.length;if(0===B?i=s=0:1===B?(i=0,s=C-w):(i=B-2,s=h(f(a(t),0),C-w)),C+i-s>m)throw TypeError(b);for(c=r(g,s),u=0;u<s;u++)v=w+u,v in g&&d(c,u,g[v]);if(c.length=s,i<s){for(u=w;u<C-s;u++)v=u+s,p=u+i,v in g?g[p]=g[v]:delete g[p];for(u=C;u>C-s+i;u--)delete g[u-1]}else if(i>s)for(u=C-s;u>w;u--)v=u+s-1,p=u+i-1,v in g?g[p]=g[v]:delete g[p];for(u=0;u<i;u++)g[u+w]=arguments[u+2];return g.length=C-s+i,c}})},b09a:function(e,t,i){},cfcb:function(e,t,i){"use strict";i("b09a")},e562:function(e,t,i){"use strict";i("355e")}}]);